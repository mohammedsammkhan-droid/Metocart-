<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metocart AI | Smart Merchant OS</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --accent: #10b981;
        }

        body {
            margin: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--dark-bg);
            color: var(--text-main);
            overflow-x: hidden;
        }

        /* --- MODERN LOGIN --- */
        #loginScreen {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at top right, #1e1b4b, #0f172a);
        }
        .login-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            padding: 40px;
            border-radius: 24px;
            width: 350px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }
        .login-card h1 { color: var(--primary); margin-bottom: 30px; }
        .login-card input {
            width: 100%;
            padding: 14px;
            margin-bottom: 15px;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 12px;
            color: white;
            box-sizing: border-box;
        }
        .login-card button {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
        }
        .login-card button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(99, 102, 241, 0.4); }

        /* --- DASHBOARD LAYOUT --- */
        .dashboard-container { display: none; min-height: 100vh; }
        
        .sidebar {
            width: 260px;
            background: #020617;
            position: fixed;
            height: 100%;
            padding: 24px;
            border-right: 1px solid #1e293b;
        }

        .nav-btn {
            width: 100%;
            padding: 14px;
            margin: 8px 0;
            background: transparent;
            color: #94a3b8;
            border: none;
            border-radius: 12px;
            text-align: left;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }
        .nav-btn:hover, .nav-btn.active {
            background: var(--primary);
            color: white;
        }

        .main-content { margin-left: 280px; padding: 40px; }

        /* --- STAT CARDS --- */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .kpi-card {
            background: var(--card-bg);
            padding: 24px;
            border-radius: 20px;
            border: 1px solid #334155;
            transition: 0.3s;
        }
        .kpi-card:hover { border-color: var(--primary); }
        .kpi-card p { color: #94a3b8; font-size: 14px; margin: 0; }
        .kpi-card h2 { font-size: 28px; margin: 10px 0 0 0; }

        /* --- FORM ELEMENTS --- */
        .card {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 24px;
            border: 1px solid #334155;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; color: #94a3b8; padding: 12px; border-bottom: 1px solid #334155; }
        td { padding: 12px; border-bottom: 1px solid #1e293b; }

        .status-pill {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
        }
        .low { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
        
        .ai-output {
            background: #0f172a;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border-left: 4px solid var(--primary);
            line-height: 1.6;
        }

        .voice-btn {
            background: #ef4444;
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .section { display: none; }
        .active-section { display: block; }

    </style>
</head>
<body>

<div id="loginScreen">
    <div class="login-card">
        <h1>Metocart <span style="color:white">AI</span></h1>
        <p style="color:#94a3b8; margin-bottom: 20px;">Dubai Expo 2026 Edition</p>
        <input type="text" id="username" placeholder="Username (admin)">
        <input type="password" id="password" placeholder="Password (1234)">
        <button onclick="login()">Enter Dashboard</button>
    </div>
</div>

<div class="dashboard-container" id="dashboard">
    <div class="sidebar">
        <h2 style="color:var(--primary); margin-bottom: 40px;">Metocart</h2>
        <button class="nav-btn active" onclick="showTab('home')">üè† Dashboard</button>
        <button class="nav-btn" onclick="showTab('inventory')">üì¶ Smart Inventory</button>
        <button class="nav-btn" onclick="showTab('billing')">üßæ GST Billing</button>
        <button class="nav-btn" onclick="showTab('ai')">ü§ñ AI Advisor</button>
        <button class="nav-btn" style="margin-top: 100px; color:#ef4444" onclick="location.reload()">üîí Logout</button>
    </div>

    <div class="main-content">
        <div id="home" class="section active-section">
            <h1 style="margin-bottom: 30px;">Business Intelligence</h1>
            <div class="kpi-grid">
                <div class="kpi-card"><p>Total Revenue</p><h2 id="rev">‚Çπ0</h2></div>
                <div class="kpi-card"><p>Net Profit</p><h2 id="profit">‚Çπ0</h2></div>
                <div class="kpi-card"><p>GST Collected</p><h2 id="gstTotal">‚Çπ0</h2></div>
                <div class="kpi-card"><p>Stock Value</p><h2 id="invValue">‚Çπ0</h2></div>
            </div>
            
            <div class="card">
                <h3>Live Insights</h3>
                <p style="color:#94a3b8">Ready to sync with India-Stack APIs for real-time compliance.</p>
            </div>
        </div>

        <div id="inventory" class="section">
            <div class="card">
                <h2>Product Catalog</h2>
                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px;">
                    <input id="pname" placeholder="Item Name">
                    <input id="pcategory" placeholder="HSN Code (e.g. 6109)">
                    <input type="number" id="pcost" placeholder="Cost Price">
                    <input type="number" id="psell" placeholder="Selling Price">
                    <input type="number" id="pqty" placeholder="Opening Stock">
                </div>
                <button class="login-card button" style="width:200px; margin-top:15px" onclick="addProduct()">+ Add Item</button>
                
                <table id="productTable">
                    <thead>
                        <tr><th>Product</th><th>HSN</th><th>Stock</th><th>Status</th></tr>
                    </thead>
                    <tbody id="inventoryBody"></tbody>
                </table>
            </div>
        </div>

        <div id="billing" class="section">
            <div class="card">
                <h2>New GST Invoice</h2>
                <div style="display: flex; gap: 20px; align-items: flex-end;">
                    <div style="flex:1">
                        <label>Select Product</label>
                        <select id="billProduct" style="width:100%; padding:12px; background:#0f172a; color:white; border-radius:10px;"></select>
                    </div>
                    <div>
                        <label>Qty</label>
                        <input type="number" id="billQty" style="width:80px">
                    </div>
                    <button class="login-card button" onclick="createInvoice()">Generate Bill</button>
                </div>
                <div id="invoiceOutput" style="margin-top:30px"></div>
            </div>
        </div>

        <div id="ai" class="section">
            <div class="card">
                <h2>Metocart AI Advisor</h2>
                <button class="voice-btn" onclick="startVoice()">üé§</button>
                <p id="voiceStatus" style="font-size:12px; color:var(--primary)">Click mic to speak in Hinglish/English</p>
                <input id="aiQuestion" placeholder="Ex: 'Which products are low on stock?'" style="padding:15px">
                <button class="login-card button" style="width:150px" onclick="generateAI()">Get Advice</button>
                <div id="aiOutput" class="ai-output">Your AI insights will appear here...</div>
            </div>
        </div>
    </div>
</div>

<script>
    let products = [];
    let totals = { rev: 0, profit: 0, gst: 0 };

    function login() {
        if(username.value === "admin" && password.value === "1234") {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
        } else { alert("Access Denied"); }
    }

    function showTab(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active-section');
        event.currentTarget.classList.add('active');
    }

    function addProduct() {
        const p = {
            name: pname.value,
            hsn: pcategory.value,
            cost: parseFloat(pcost.value),
            sell: parseFloat(psell.value),
            qty: parseInt(pqty.value)
        };
        products.push(p);
        renderInventory();
        updateBillingList();
        updateStats();
    }

    function renderInventory() {
        let html = "";
        products.forEach(p => {
            const status = p.qty < 5 ? "low" : "";
            html += `<tr>
                <td>${p.name}</td>
                <td>${p.hsn}</td>
                <td>${p.qty}</td>
                <td><span class="status-pill ${status}">${p.qty < 5 ? 'Restock' : 'Healthy'}</span></td>
            </tr>`;
        });
        inventoryBody.innerHTML = html;
    }

    function updateBillingList() {
        billProduct.innerHTML = products.map((p, i) => `<option value="${i}">${p.name} (Stock: ${p.qty})</option>`).join('');
    }

    function createInvoice() {
        const i = billProduct.value;
        const q = parseInt(billQty.value);
        const p = products[i];

        if(q > p.qty) return alert("Out of stock!");

        const sub = p.sell * q;
        const gst = sub * 0.18;
        const prof = (p.sell - p.cost) * q;

        p.qty -= q;
        totals.rev += (sub + gst);
        totals.gst += gst;
        totals.profit += prof;

        updateStats();
        renderInventory();

        invoiceOutput.innerHTML = `
            <div style="background:#0f172a; padding:20px; border-radius:15px; border:1px dashed var(--primary)">
                <h3 style="margin:0">Tax Invoice</h3>
                <p>Item: ${p.name} x ${q}</p>
                <hr style="border-color:#334155">
                <p>GST (18%): ‚Çπ${gst.toFixed(2)}</p>
                <h2 style="color:var(--accent)">Total: ‚Çπ${(sub+gst).toFixed(2)}</h2>
                <button onclick="alert('Sending to WhatsApp...')" style="background:#25D366; color:white; border:none; padding:8px 15px; border-radius:8px; cursor:pointer">Share on WhatsApp</button>
            </div>
        `;
    }

    function updateStats() {
        rev.innerText = "‚Çπ" + totals.rev.toFixed(0);
        profit.innerText = "‚Çπ" + totals.profit.toFixed(0);
        gstTotal.innerText = "‚Çπ" + totals.gst.toFixed(0);
        const stockVal = products.reduce((acc, p) => acc + (p.cost * p.qty), 0);
        invValue.innerText = "‚Çπ" + stockVal.toFixed(0);
    }

    // AI MOCK LOGIC (Connect to your Groq/OpenAI Key)
    async function generateAI() {
        aiOutput.innerHTML = "‚ú® Analyzing your business data for the Indian market...";
        setTimeout(() => {
            aiOutput.innerHTML = "<b>AI INSIGHT:</b> Your revenue is growing. To maximize profit, consider increasing stock of high-margin items before the festive season. Your current GST liability for the month is estimated at ‚Çπ" + totals.gst.toFixed(2);
        }, 1500);
    }

    function startVoice() {
        voiceStatus.innerText = "Listening...";
        setTimeout(() => {
            voiceStatus.innerText = "Processed: 'Check my inventory'";
            aiQuestion.value = "Check my inventory";
        }, 2000);
    }
</script>
</body>
</html>

