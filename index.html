<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meto OS | Dubai Expo 2026 Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --gold: #d4af37; --primary: #6366f1; --dark-bg: #030712; 
            --card-bg: #111827; --text: #f9fafb; --accent: #10b981; 
            --danger: #f43f5e; --border: #1f2937;
        }
        body { margin: 0; font-family: 'Plus Jakarta Sans', sans-serif; background: var(--dark-bg); color: var(--text); overflow-x: hidden; }
        
        /* Premium Navigation */
        .sidebar { width: 280px; background: #000; position: fixed; height: 100vh; padding: 30px 20px; border-right: 1px solid var(--border); z-index: 100; transition: 0.3s; }
        .logo-area { margin-bottom: 40px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
        .nav-btn { width: 100%; padding: 16px; margin: 10px 0; background: transparent; color: #6b7280; border: none; border-radius: 14px; text-align: left; cursor: pointer; font-weight: 600; transition: 0.3s; display: flex; align-items: center; gap: 12px; }
        .nav-btn:hover { background: #111827; color: var(--text); }
        .nav-btn.active { background: linear-gradient(135deg, var(--primary), #4338ca); color: white; box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.3); }
        
        /* Main Layout */
        .main-content { margin-left: 320px; padding: 40px; max-width: 1400px; }
        .header-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        
        /* Dubai Expo Dash Widgets */
        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; margin-bottom: 40px; }
        .kpi-card { background: var(--card-bg); padding: 25px; border-radius: 24px; border: 1px solid var(--border); position: relative; overflow: hidden; }
        .kpi-card::before { content: ""; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--gold); }
        .kpi-card small { color: #9ca3af; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; }
        .kpi-card h2 { margin: 10px 0 0; font-size: 2rem; letter-spacing: -1px; }

        /* Tables & Forms */
        .glass-card { background: var(--card-bg); padding: 30px; border-radius: 28px; border: 1px solid var(--border); }
        input, select, textarea { background: #030712; border: 1px solid var(--border); border-radius: 12px; padding: 14px; color: white; width: 100%; margin-bottom: 15px; font-family: inherit; font-size: 1rem; }
        input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2); }
        .action-btn { background: var(--gold); color: black; border: none; padding: 14px 28px; border-radius: 12px; cursor: pointer; font-weight: 700; transition: 0.3s; }
        .action-btn:hover { transform: translateY(-2px); opacity: 0.9; }

        /* Responsive Mobile */
        @media (max-width: 1024px) {
            .sidebar { width: 80px; padding: 20px 10px; }
            .sidebar span, .logo-area p { display: none; }
            .main-content { margin-left: 100px; padding: 20px; }
            .kpi-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

<aside class="sidebar">
    <div class="logo-area">
        <h2 style="color:var(--gold); margin:0;">METO OS</h2>
        <p style="color:#4b5563; font-size: 0.7rem; font-weight: 700; margin-top:5px;">DUBAI EXPO PRO</p>
    </div>
    <button class="nav-btn active" onclick="showTab('home')">üìä <span>Intelligence</span></button>
    <button class="nav-btn" onclick="showTab('billing')">üßæ <span>Quick Bill</span></button>
    <button class="nav-btn" onclick="showTab('inventory')">üì¶ <span>Inventory</span></button>
    <button class="nav-btn" onclick="showTab('ai')">ü™Ñ <span>AI Insights</span></button>
    <div style="position:absolute; bottom:30px; width: calc(100% - 40px);">
        <button class="nav-btn" onclick="exportData()" style="color:var(--accent)">üíæ <span>Backup</span></button>
    </div>
</aside>

<main class="main-content">
    <header class="header-bar">
        <div>
            <h1 id="greeting">Marhaba!</h1>
            <p style="color:#6b7280;" id="liveClock"></p>
        </div>
        <div style="background:var(--card-bg); padding:10px 20px; border-radius:50px; border:1px solid var(--border)">
            <span style="color:var(--accent)">‚óè</span> System Online
        </div>
    </header>

    <div id="home" class="section active-section">
        <div class="kpi-grid">
            <div class="kpi-card"><small>Total Revenue</small><h2 id="revTotal" style="color:var(--gold)">‚Çπ0</h2></div>
            <div class="kpi-card"><small>Net Profit</small><h2 id="profitTotal" style="color:var(--accent)">‚Çπ0</h2></div>
            <div class="kpi-card"><small>VAT/GST (18%)</small><h2 id="gstTotal">‚Çπ0</h2></div>
            <div class="kpi-card"><small>Active Sales</small><h2 id="salesCount">0</h2></div>
        </div>

        <div style="display:grid; grid-template-columns: 1.5fr 1fr; gap:30px;">
            <div class="glass-card">
                <h3>üèÜ Best Sellers</h3>
                <div id="bestSellersList" style="margin-top:20px;"></div>
            </div>
            <div class="glass-card" style="background: linear-gradient(to bottom right, #111827, #000);">
                <h3>üö© Stock Alerts</h3>
                <div id="stockAlerts" style="margin-top:20px;"></div>
            </div>
        </div>
    </div>

    <div id="billing" class="section">
        <div class="glass-card">
            <h2>Fast Checkout</h2>
            <div style="display:grid; grid-template-columns: 2fr 1fr 100px; gap:15px; align-items:end;">
                <div><label>Product</label><select id="prodSelect"></select></div>
                <div><label>Qty</label><input type="number" id="prodQty" value="1"></div>
                <button class="action-btn" onclick="addToCart()" style="background:var(--primary); color:white;">Add</button>
            </div>
            <div id="cartArea" style="margin-top:30px; border-top:1px solid var(--border); padding-top:20px;">
                <div id="cartItems"></div>
                <div id="billFooter" style="display:none; text-align:right; margin-top:20px;">
                    <h2 id="billTotal" style="color:var(--gold)">Total: ‚Çπ0</h2>
                    <button class="action-btn" onclick="finalizeSale()">Generate & Print Invoice</button>
                </div>
            </div>
        </div>
    </div>

    <div id="inventory" class="section">
        <div class="glass-card">
            <h2>Add to Exhibition Stock</h2>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <input id="itemName" placeholder="Item Name">
                <input id="itemCost" type="number" placeholder="Cost Price">
                <input id="itemSell" type="number" placeholder="Sale Price">
                <input id="itemQty" type="number" placeholder="Opening Stock">
            </div>
            <button class="action-btn" onclick="saveItem()">Register Item</button>
        </div>
    </div>
</main>

<script>
    let products = JSON.parse(localStorage.getItem('expo_products')) || [];
    let sales = JSON.parse(localStorage.getItem('expo_sales')) || [];
    let cart = [];

    // System Initialization
    window.onload = () => {
        updateClock();
        refreshUI();
        setInterval(updateClock, 1000);
    };

    function updateClock() {
        const now = new Date();
        document.getElementById('liveClock').innerText = now.toLocaleString('en-US', { 
            weekday: 'long', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' 
        });
    }

    function showTab(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active-section');
        event.currentTarget.classList.add('active');
        refreshUI();
    }

    // Business Logic
    function saveItem() {
        products.push({
            name: itemName.value,
            cost: parseFloat(itemCost.value) || 0,
            sell: parseFloat(itemSell.value) || 0,
            qty: parseInt(itemQty.value) || 0
        });
        localStorage.setItem('expo_products', JSON.stringify(products));
        alert("Stock Updated!");
        refreshUI();
    }

    function refreshUI() {
        // Update Dash
        let rev = 0, prof = 0, gst = 0;
        sales.forEach(s => { rev += s.total; prof += s.profit; gst += s.gst; });
        document.getElementById('revTotal').innerText = "‚Çπ" + rev.toFixed(0);
        document.getElementById('profitTotal').innerText = "‚Çπ" + prof.toFixed(0);
        document.getElementById('gstTotal').innerText = "‚Çπ" + gst.toFixed(0);
        document.getElementById('salesCount').innerText = sales.length;

        // Update Dropdown
        prodSelect.innerHTML = '<option value="">Choose Item...</option>' + 
            products.map((p, i) => `<option value="${i}">${p.name} (Stock: ${p.qty})</option>`).join('');
    }

    function addToCart() {
        const p = products[prodSelect.value];
        const q = parseInt(prodQty.value);
        if(!p || q > p.qty) return alert("Error in Selection or Stock");
        
        cart.push({ name: p.name, qty: q, price: p.sell, cost: p.cost, subtotal: p.sell * q, id: prodSelect.value });
        renderCart();
    }

    function renderCart() {
        let total = cart.reduce((a, b) => a + b.subtotal, 0);
        cartItems.innerHTML = cart.map(c => `<div style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #1f2937"><span>${c.name} x${c.qty}</span><span>‚Çπ${c.subtotal}</span></div>`).join('');
        billFooter.style.display = cart.length ? 'block' : 'none';
        billTotal.innerText = "Total (Inc. VAT): ‚Çπ" + (total * 1.18).toFixed(0);
    }

    function finalizeSale() {
        let sTotal = 0, sProf = 0, sGst = 0;
        cart.forEach(c => {
            products[c.id].qty -= c.qty;
            const itemGst = c.subtotal * 0.18;
            sTotal += (c.subtotal + itemGst);
            sGst += itemGst;
            sProf += (c.price - c.cost) * c.qty;
        });

        sales.push({ timestamp: new Date(), total: sTotal, profit: sProf, gst: sGst });
        localStorage.setItem('expo_products', JSON.stringify(products));
        localStorage.setItem('expo_sales', JSON.stringify(sales));
        
        cart = [];
        renderCart();
        refreshUI();
        alert("Dubai Expo Transaction Successful!");
    }

    function exportData() {
        const blob = new Blob([JSON.stringify({products, sales})], {type: 'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'Dubai_Expo_Backup.json';
        a.click();
    }
</script>
</body>
</html>
